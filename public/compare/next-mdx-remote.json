{"title":"[React Query] useQuery 동작원리(1)","date":"2023-02-09","lastmod":"2023-02-13T05:38:24.234Z","tags":["React Query","라이브러리 분석"],"draft":false,"series":"동작원리","summary":"Tanstack Query(React Query)의 useQuery의 동작원리를 분석했습니다. 이 포스트에서는 중요한 객체들간의 관계와 QueryObserver의 생성에 대해 다룹니다.","images":["https://i.imgur.com/OYRQCRi.png"],"layout":"PostLayout","code":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h2: \"h2\",\n    p: \"p\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    h3: \"h3\",\n    div: \"div\",\n    img: \"img\",\n    ul: \"ul\",\n    li: \"li\",\n    sup: \"sup\",\n    a: \"a\",\n    em: \"em\",\n    strong: \"strong\",\n    section: \"section\",\n    ol: \"ol\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h2, {\n      id: \"분석하기-앞서\",\n      children: \"분석하기 앞서\"\n    }), _jsx(_components.p, {\n      children: \"이 포스트는 React Query를 어떻게 사용하는지 적은 글이 아닙니다. React Query가 내부적으로 어떻게 구현되어 있는지 소스코드를 분석한 글입니다. 앞으로 여러 편에 걸쳐서 React Query의 내부 구조를 분석할 것입니다. 이번 포스트는 그 중에서 useQuery를 분석해보려고 합니다.\"\n    }), _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"code-highlight\",\n        children: [_jsx(_components.span, {\n          className: \"code-line\",\n          children: \"@tanstack\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  ├── query-core\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  │     ├── notifyManager.ts\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  │     ├── query.ts\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  │     ├── queryCache.ts\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  │     ├── queryClient.ts\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  │     └── queryObserver.ts\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  │\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  └── react-query\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"        ├── useBaseQuery.ts\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"        └── useQuery.ts\\n\"\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [\"react query를 사용하기 위해 \", _jsx(_components.code, {\n        children: \"yarn add @tanstack/react-query\"\n      }), \"를 하면 @tanstack 폴더 안에 query-core와 react-query가 설치됩니다. query-core 폴더에는 라이브러리의 핵심 기능들에 대한 코드가 작성되어 있고, react-query 폴더에는 query-core의 코드들을 리액트에서 사용할 수 있도록 훅으로 만들어주는 코드 등이 들어있습니다.\"]\n    }), _jsx(_components.p, {\n      children: \"위의 구조는 useQuery 분석에서 핵심적으로 다루게 될 파일들입니다. 그러면 분석을 시작해보겠습니다. (이 포스트는 @tanstack/react-query 4.24.4 버전을 기준으로 작성되었습니다.)\"\n    }), _jsx(_components.h2, {\n      id: \"4개의-주요-객체와--α\",\n      children: \"4개의 주요 객체와 + α\"\n    }), _jsxs(_components.p, {\n      children: [\"useQuery 분석 포스트에서 계속해서 언급될 4개의 객체가 있습니다. \", _jsx(_components.code, {\n        children: \"QueryClient\"\n      }), \", \", _jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \", \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \", \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"가 그것들입니다. 우선 이 객체들이 어떤 관계인지부터 알아보도록 하겠습니다.\"]\n    }), _jsx(_components.h3, {\n      id: \"queryclient\",\n      children: \"QueryClient\"\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"_app.tsx\"\n    }), _jsx(_components.pre, {\n      className: \"language-tsx\",\n      children: _jsxs(_components.code, {\n        className: \"code-highlight language-tsx\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"import\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token imports\",\n            children: [_jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"{\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token maybe-class-name\",\n              children: \"QueryClient\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"}\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"from\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"'@tanstack/query-core'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"import\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token imports\",\n            children: [_jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"{\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token maybe-class-name\",\n              children: \"QueryClientProvider\"\n            }), \" \", _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"}\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"from\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"'@tanstack/react-query'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"import\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"type\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"AppProps\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"from\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"'next/app'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"export\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"default\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"App\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"Component\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" pageProps \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"AppProps\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line highlight-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" queryClient \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"new\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"QueryClient\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line highlight-line\",\n          children: [\"    \", _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), _jsx(_components.span, {\n                className: \"token class-name\",\n                children: \"QueryClientProvider\"\n              })]\n            }), \" \", _jsx(_components.span, {\n              className: \"token attr-name\",\n              children: \"client\"\n            }), _jsxs(_components.span, {\n              className: \"token language-javascript script\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation script-punctuation\",\n                children: \"=\"\n              }), _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"{\"\n              }), \"queryClient\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"}\"\n              })]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"\\r\\n\"\n          })]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"      \"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), _jsx(_components.span, {\n                className: \"token class-name\",\n                children: \"Component\"\n              })]\n            }), \" \", _jsxs(_components.span, {\n              className: \"token spread\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"{\"\n              }), _jsx(_components.span, {\n                className: \"token operator spread\",\n                children: \"...\"\n              }), \"pageProps\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"}\"\n              })]\n            }), \" \", _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"/>\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"\\r\\n\"\n          })]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"    \"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"</\"\n              }), _jsx(_components.span, {\n                className: \"token class-name\",\n                children: \"QueryClientProvider\"\n              })]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"queryClient.ts\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"export\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"class\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"QueryClient\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"private\"\n          }), \" queryCache\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryCache\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"constructor\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"config\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryClientConfig \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line highlight-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"queryCache \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" config\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"queryCache \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"||\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"new\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"QueryCache\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"QueryClient\"\n      }), \"는 context api를 통해 전역적으로 사용할 수 있는 객체입니다. \", _jsx(_components.code, {\n        children: \"QueryClientProvider\"\n      }), \"의 \", _jsx(_components.code, {\n        children: \"client\"\n      }), \"로 넘겨주어 전역에서 사용할 수 있게 만들어줍니다. 프로젝트에서 여러개의 Provider를 만들지 않는다면 1개만 존재하게 됩니다.\"]\n    }), _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"QueryClient\"\n      }), \"는 생성될 때 \", _jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \" 객체를 가지게됩니다. \", _jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \"는 어떤 객체일까요?\"]\n    }), _jsx(_components.h3, {\n      id: \"querycache\",\n      children: \"QueryCache\"\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"QueryCache.ts\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"export\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"class\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"QueryCache\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"extends\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token class-name\",\n            children: [\"Subscribable\", _jsx(_components.span, {\n              className: \"token operator\",\n              children: \"<\"\n            }), \"QueryCacheListener\", _jsx(_components.span, {\n              className: \"token operator\",\n              children: \">\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  config\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryCacheConfig\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"private\"\n          }), \" queries\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" Query\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), _jsx(_components.span, {\n            className: \"token builtin\",\n            children: \"any\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token builtin\",\n            children: \"any\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token builtin\",\n            children: \"any\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token builtin\",\n            children: \"any\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"private\"\n          }), \" queriesMap\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryHashMap\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"constructor\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"config\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryCacheConfig\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"super\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"config \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" config \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"||\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"queries \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"queriesMap \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"add\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"query\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" Query\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), _jsx(_components.span, {\n            className: \"token builtin\",\n            children: \"any\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token builtin\",\n            children: \"any\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token builtin\",\n            children: \"any\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token builtin\",\n            children: \"any\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!\"\n          }), _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"queriesMap\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"query\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"queryHash\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line highlight-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"queriesMap\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"query\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"queryHash\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" query\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line highlight-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"queries\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"push\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"query\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"notify\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        type\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"'added'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        query\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \"는 \", _jsx(_components.code, {\n        children: \"queries\"\n      }), \" 배열과 \", _jsx(_components.code, {\n        children: \"queriesMap\"\n      }), \" 객체에 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \" 객체들을 저장합니다. 위 코드에서는 생략되었지만 \", _jsx(_components.code, {\n        children: \"useQuery()\"\n      }), \"의 인자로 넘겨준 queryKey를 이용해 \", _jsx(_components.code, {\n        children: \"queryHash\"\n      }), \"를 만들고 \", _jsx(_components.code, {\n        children: \"queriesMap\"\n      }), \" 객체의 key로써 사용합니다. 그리고 value로 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \" 객체가 저장됩니다. \", _jsx(_components.code, {\n        children: \"queryHash\"\n      }), \"를 이용해 이번 요청이 이전에 들어온 요청과 동일한 요청인지 판단합니다. 이 부분을 다룰 때 더욱 자세히 설명하겠습니다.\"]\n    }), _jsx(_components.h3, {\n      id: \"query\",\n      children: \"Query\"\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"query.ts\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"1\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"export\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"class\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token class-name\",\n            children: [\"Query\", _jsx(_components.span, {\n              className: \"token operator\",\n              children: \"<\"\n            }), _jsx(_components.span, {\n              className: \"token operator\",\n              children: \"...\"\n            }), _jsx(_components.span, {\n              className: \"token operator\",\n              children: \">\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"extends\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"Removable\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"2\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"3\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"4\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"constructor\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"config\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryConfig\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), \"TQueryFnData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TError\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TQueryKey\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"5\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"super\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"6\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"7\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"observers \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"8\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"cache \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" config\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"cache\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"9\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"state \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"initialState\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"10\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"11\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"12\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"13\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"Query\"\n      }), \" 객체는 자신을 가지고 있는 \", _jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \"와 자신의 상태가 변경되었을 때 호출할 옵저버들을 가집니다. 구독요청이 들어오면 \", _jsx(_components.code, {\n        children: \"this.observers\"\n      }), \"에 옵저버가 추가되어, 상태가 변경되면 등록된 옵저버들을 호출합니다.\"]\n    }), _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"this.state\"\n      }), \"에는 \", _jsx(_components.code, {\n        children: \"data\"\n      }), \", \", _jsx(_components.code, {\n        children: \"isLoading\"\n      }), \", \", _jsx(_components.code, {\n        children: \"isFetching\"\n      }), \" 등 \", _jsx(_components.code, {\n        children: \"useQuery()\"\n      }), \"를 통해 얻을 수 있는 정보들이 담겨있습니다.\"]\n    }), _jsx(_components.h3, {\n      id: \"queryobserver\",\n      children: \"QueryObserver\"\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"QueryObserver.ts\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"1\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"export\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"class\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token class-name\",\n            children: [\"QueryObserver\", _jsx(_components.span, {\n              className: \"token operator\",\n              children: \"<\"\n            }), _jsx(_components.span, {\n              className: \"token operator\",\n              children: \"...\"\n            }), _jsx(_components.span, {\n              className: \"token operator\",\n              children: \">\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"extends\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token class-name\",\n            children: [\"Subscribable\", _jsx(_components.span, {\n              className: \"token operator\",\n              children: \"<\"\n            }), \"QueryObserverListener\", _jsx(_components.span, {\n              className: \"token operator\",\n              children: \"<\"\n            }), \"TData\", _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \",\"\n            }), \" TError\", _jsx(_components.span, {\n              className: \"token operator\",\n              children: \">>\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"2\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"3\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"constructor\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"4\",\n          children: [\"    client\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryClient\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"5\",\n          children: [\"    options\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryObserverOptions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"6\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"7\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"super\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"8\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"9\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"client \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" client\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"10\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"11\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"trackedProps \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"new\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"Set\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"12\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"13\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"14\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"15\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"protected\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"onSubscribe\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"16\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"listeners\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"length \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"===\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"1\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"17\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentQuery\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"addObserver\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"18\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"19\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"shouldFetchOnMount\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentQuery\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"20\",\n          children: [\"        \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"executeFetch\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"21\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"22\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"23\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"24\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"25\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"26\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"private\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"updateQuery\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"27\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" query \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"client\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getQueryCache\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"build\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"client\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"28\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"29\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"query \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"===\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentQuery\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"30\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"31\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"32\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"33\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentQuery \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" query\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"34\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"35\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"36\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \" 객체는 \", _jsx(_components.code, {\n        children: \"QueryClient\"\n      }), \"와 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \" 객체를 가지게 됩니다(9, 33번 라인). 11번 라인의 \", _jsx(_components.code, {\n        children: \"trackedProps\"\n      }), \"는 꽤나 재밌는 역할을 합니다. 라이브러리에서 우리가 어떤 상태들을 요청했는지를 기록합니다. 이 부분을 다룰 때 자세히 설명드리겠습니다.\"]\n    }), _jsxs(_components.p, {\n      children: [\"위에서 설명했다시피 구독 요청이 들어오면, \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \" 객체에 옵저버로 \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"가 등록됩니다(17번 라인).\"]\n    }), _jsx(_components.h3, {\n      id: \"정리\",\n      children: \"정리\"\n    }), _jsx(_components.div, {\n      children: _jsx(_components.img, {\n        alt: \"객체간의 관계\",\n        src: \"https://i.imgur.com/O6pncr8.png,https://i.imgur.com/bUkSevN.png\"\n      })\n    }), _jsxs(_components.ul, {\n      children: [_jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"QueryClient\"\n        }), \"는 하나만 존재합니다.\", _jsx(_components.sup, {\n          children: _jsx(_components.a, {\n            href: \"#user-content-fn-1\",\n            \"aria-describedby\": \"footnote-label\",\n            \"data-footnote-ref\": true,\n            id: \"user-content-fnref-1\",\n            children: \"1\"\n          })\n        }), \" \", _jsx(_components.code, {\n          children: \"QueryClient\"\n        }), \"가 생성될 때 \", _jsx(_components.code, {\n          children: \"QueryCache\"\n        }), \"를 새로 생성하여 \", _jsx(_components.code, {\n          children: \"this.queryCache\"\n        }), \"에 저장합니다.\"]\n      }), _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"QueryCache\"\n        }), \"는 \", _jsx(_components.code, {\n          children: \"Query\"\n        }), \" 객체가 새로 생성될 때마다 \", _jsx(_components.code, {\n          children: \"this.queriesMap\"\n        }), \"과 \", _jsx(_components.code, {\n          children: \"this.queries\"\n        }), \"에 저장합니다.\"]\n      }), _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"Query\"\n        }), \"는 생성될 때 자신을 소유한 \", _jsx(_components.code, {\n          children: \"QueryCache\"\n        }), \"를 \", _jsx(_components.code, {\n          children: \"this.cache\"\n        }), \"에 저장합니다. 그리고 \", _jsx(_components.code, {\n          children: \"QueryObserver.onSubscribe()\"\n        }), \" 함수가 호출되면(구독요청이 들어오면), \", _jsx(_components.code, {\n          children: \"this.observers\"\n        }), \" 배열에 옵저버로 \", _jsx(_components.code, {\n          children: \"QueryObserver\"\n        }), \"가 등록됩니다.\"]\n      }), _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"QueryObserver\"\n        }), \"는 생성될 때 \", _jsx(_components.code, {\n          children: \"QueryClient\"\n        }), \"를 \", _jsx(_components.code, {\n          children: \"this.client\"\n        }), \"에 저장합니다. 이전에 갖고 있던 쿼리가 없거나 쿼리가 새로 업데이트 되면, \", _jsx(_components.code, {\n          children: \"this.query\"\n        }), \"를 최신화시킵니다.\"]\n      })]\n    }), _jsxs(_components.p, {\n      children: [\"위 그림은 4개의 객체의 관계를 그림으로 나타낸 것입니다. 모든 관계가 중요하지만, 특히 주목해서 봐야할 점은 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \" 객체와 \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"의 관계입니다. \", _jsx(_components.code, {\n        children: \"useQuery\"\n      }), \"를 사용할 때 같은 key를 사용한다면 동일한 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \"를 여러개의 \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"들이 공유하게 됩니다. 이렇게 Query를 공유함으로써 이전에 비동기 함수를 실행했다면 추가적으로 실행하지 않게 만들며, 요청이 완료되었을 때 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \"에 등록되어 있던 옵저버들을 호출하여 리렌더링을 발생시킵니다.\"]\n    }), _jsx(_components.h3, {\n      id: \"-α-notifymanager\",\n      children: \"+ α: NotifyManager\"\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"notifyManager.ts\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"type\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"NotifyCallback\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"type\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"NotifyFunction\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token function function-variable\",\n            children: \"callback\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"type\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"BatchNotifyFunction\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token function function-variable\",\n            children: \"callback\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"export\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"createNotifyManager\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"let\"\n          }), \" queue\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" NotifyCallback\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"let\"\n          }), \" transactions \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"0\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"let\"\n          }), \" notifyFn\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function function-variable\",\n            children: \"NotifyFunction\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"callback\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"callback\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"let\"\n          }), \" batchNotifyFn\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function function-variable\",\n            children: \"BatchNotifyFunction\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token function function-variable\",\n            children: \"callback\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"callback\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line highlight-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" batch \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), _jsx(_components.span, {\n            className: \"token constant\",\n            children: \"T\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token function function-variable\",\n            children: \"callback\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token constant\",\n            children: \"T\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token constant\",\n            children: \"T\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line highlight-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" schedule \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"callback\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" NotifyCallback\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line highlight-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" batchCalls \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), _jsx(_components.span, {\n            className: \"token constant\",\n            children: \"T\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"extends\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: _jsx(_components.span, {\n              className: \"token builtin\",\n              children: \"Function\"\n            })\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"callback\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token constant\",\n            children: \"T\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token constant\",\n            children: \"T\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line highlight-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" flush \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    batch\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    batchCalls\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    schedule\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"as\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// SINGLETON\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"export\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" notifyManager \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"createNotifyManager\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"notifyManager\"\n      }), \"는 Singleton으로 관리되며 클로저\", _jsx(_components.sup, {\n        children: _jsx(_components.a, {\n          href: \"#user-content-fn-2\",\n          \"aria-describedby\": \"footnote-label\",\n          \"data-footnote-ref\": true,\n          id: \"user-content-fnref-2\",\n          children: \"2\"\n        })\n      }), \"를 사용하는 객체입니다. 위에서 소개한 4개의 객체가, 특히 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \", \", _jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \", \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"가 notifyManager를 이용해 상태변경, 옵저버 추가 등의 이벤트를 서로에게 알려주는 역할을 합니다. 또, notifyManager 내부에서 각 컴포넌트 리렌더링이 최대한 동시에 일어날 수 있도록 나름의 batch 기능도 구현해놓았습니다. 이 또한 뒤에서 더 자세히 다루겠습니다.\"]\n    }), _jsx(_components.p, {\n      children: \"이제 본격적으로 분석해보도록 하겠습니다!\"\n    }), _jsx(_components.h2, {\n      id: \"프로젝트-구조\",\n      children: \"프로젝트 구조\"\n    }), _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"code-highlight\",\n        children: [_jsx(_components.span, {\n          className: \"code-line\",\n          children: \"project\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  ├── components\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  │     ├── component1.tsx\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  │     └── component2.tsx\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  │\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"  └── pages\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"        ├── _app.tsx\\r\\n\"\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"        └── index.tsx\\n\"\n        })]\n      })\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"components/component1.tsx\"\n    }), _jsx(_components.pre, {\n      className: \"language-tsx\",\n      children: _jsxs(_components.code, {\n        className: \"code-highlight language-tsx\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"import\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token imports\",\n            children: \"axios\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"from\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"'axios'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"import\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token imports\",\n            children: [_jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"{\"\n            }), \" useQuery \", _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"}\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"from\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"'@tanstack/react-query'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// Component2 동일\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function function-variable\",\n            children: \"Component1\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator arrow\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \" isLoading\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" error\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" data\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" isFetching \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"useQuery\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    queryKey\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            className: \"token string\",\n            children: \"'repoData'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token function function-variable\",\n            children: \"queryFn\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator arrow\",\n            children: \"=>\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"      axios\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function property-access method\",\n            children: \"get\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token string\",\n            children: \"'https://api.github.com/repos/tannerlinsley/react-query'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function property-access method\",\n            children: \"then\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"res\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator arrow\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"          \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" res\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token property-access\",\n            children: \"data\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"        \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"isLoading\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), \"div\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"Loading...\"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"</\"\n              }), \"div\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"error\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), \"div\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"An error has occurred: + \"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"error\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token property-access\",\n            children: \"message\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"</\"\n              }), \"div\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), \"div\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"\\r\\n\"\n          })]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"      \"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), \"h1\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"data\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token property-access\",\n            children: \"name\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"</\"\n              }), \"h1\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"\\r\\n\"\n          })]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"      \"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), \"p\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"data\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token property-access\",\n            children: \"description\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"</\"\n              }), \"p\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"\\r\\n\"\n          })]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"      \"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), \"strong\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"👀 \"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"data\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token property-access\",\n            children: \"subscribers_count\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"</\"\n              }), \"strong\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), _jsx(_components.span, {\n            className: \"token string\",\n            children: \"' '\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"\\r\\n\"\n          })]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"      \"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), \"strong\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"✨ \"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"data\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token property-access\",\n            children: \"stargazers_count\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"</\"\n              }), \"strong\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), _jsx(_components.span, {\n            className: \"token string\",\n            children: \"' '\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"\\r\\n\"\n          })]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"      \"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), \"strong\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"🍴 \"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"data\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token property-access\",\n            children: \"forks_count\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"</\"\n              }), \"strong\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"\\r\\n\"\n          })]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"      \"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), \"div\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"isFetching \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"'Updating...'\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"''\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"</\"\n              }), \"div\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"\\r\\n\"\n          })]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"    \"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"</\"\n              }), \"div\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"export\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"default\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"Component1\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"pages/index.tsx\"\n    }), _jsx(_components.pre, {\n      className: \"language-tsx\",\n      children: _jsxs(_components.code, {\n        className: \"code-highlight language-tsx\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"import\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token imports\",\n            children: _jsx(_components.span, {\n              className: \"token maybe-class-name\",\n              children: \"Component1\"\n            })\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"from\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"'@/components/component1'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"import\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token imports\",\n            children: _jsx(_components.span, {\n              className: \"token maybe-class-name\",\n              children: \"Component2\"\n            })\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"from\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"'@/components/component2'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"export\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"default\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"Home\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), \"div\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"\\r\\n\"\n          })]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"      \"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), _jsx(_components.span, {\n                className: \"token class-name\",\n                children: \"Component1\"\n              })]\n            }), \" \", _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"/>\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"\\r\\n\"\n          })]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"      \"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"<\"\n              }), _jsx(_components.span, {\n                className: \"token class-name\",\n                children: \"Component2\"\n              })]\n            }), \" \", _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \"/>\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"\\r\\n\"\n          })]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token plain-text\",\n            children: \"    \"\n          }), _jsxs(_components.span, {\n            className: \"token tag\",\n            children: [_jsxs(_components.span, {\n              className: \"token tag\",\n              children: [_jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \"</\"\n              }), \"div\"]\n            }), _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \">\"\n            })]\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [\"위와 같은 구조의 Next JS 프로젝트에서 React Query를 사용한다고 하겠습니다. \", _jsx(_components.code, {\n        children: \"Component\"\n      }), \"의 코드는 React Query의 공식문서에서 그대로 가져온 코드입니다. \", _jsx(_components.code, {\n        children: \"_app.tsx\"\n      }), \"는 \", _jsx(_components.a, {\n        href: \"#queryclient\",\n        children: \"QueryClient\"\n      }), \"에서 설명한 것과 동일합니다. Next JS가 익숙하지 않으신 분들은, 그냥 최상위에서 React Query를 위한 Provider를 적절히 설정해주고, 서로다른 2개의 컴포넌트에서 동일한 queryKey의 \", _jsx(_components.code, {\n        children: \"useQuery()\"\n      }), \"를 사용하고 있다고 생각하시면 됩니다.\"]\n    }), _jsx(_components.h2, {\n      id: \"usequery와-usebasequery\",\n      children: \"useQuery와 useBaseQuery\"\n    }), _jsx(_components.h3, {\n      id: \"usequery\",\n      children: \"useQuery\"\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"useQuery.ts\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"1\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"export\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token generic-function\",\n            children: [_jsx(_components.span, {\n              className: \"token function\",\n              children: \"useQuery\"\n            }), _jsxs(_components.span, {\n              className: \"token class-name generic\",\n              children: [_jsx(_components.span, {\n                className: \"token operator\",\n                children: \"<\"\n              }), \"\\r\\n\"]\n            })]\n          })]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"2\",\n          children: _jsx(_components.span, {\n            className: \"token generic-function\",\n            children: _jsxs(_components.span, {\n              className: \"token class-name generic\",\n              children: [\"  TQueryFnData\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \"\\r\\n\"]\n            })\n          })\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"3\",\n          children: _jsx(_components.span, {\n            className: \"token generic-function\",\n            children: _jsxs(_components.span, {\n              className: \"token class-name generic\",\n              children: [\"  TError\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \"\\r\\n\"]\n            })\n          })\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"4\",\n          children: _jsx(_components.span, {\n            className: \"token generic-function\",\n            children: _jsxs(_components.span, {\n              className: \"token class-name generic\",\n              children: [\"  TData \", _jsx(_components.span, {\n                className: \"token operator\",\n                children: \"=\"\n              }), \" TQueryFnData\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \"\\r\\n\"]\n            })\n          })\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"5\",\n          children: _jsx(_components.span, {\n            className: \"token generic-function\",\n            children: _jsxs(_components.span, {\n              className: \"token class-name generic\",\n              children: [\"  TQueryKey \", _jsx(_components.span, {\n                className: \"token keyword\",\n                children: \"extends\"\n              }), \" QueryKey \", _jsx(_components.span, {\n                className: \"token operator\",\n                children: \"=\"\n              }), \" QueryKey\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \"\\r\\n\"]\n            })\n          })\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"6\",\n          children: [_jsx(_components.span, {\n            className: \"token generic-function\",\n            children: _jsx(_components.span, {\n              className: \"token class-name generic\",\n              children: _jsx(_components.span, {\n                className: \"token operator\",\n                children: \">\"\n              })\n            })\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"7\",\n          children: [\"  arg1\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" TQueryKey \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"|\"\n          }), \" UseQueryOptions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), \"TQueryFnData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TError\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TQueryKey\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"8\",\n          children: [\"  arg2\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"9\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"|\"\n          }), \" QueryFunction\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), \"TQueryFnData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TQueryKey\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"10\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"|\"\n          }), \" UseQueryOptions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), \"TQueryFnData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TError\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TQueryKey\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"11\",\n          children: [\"  arg3\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" UseQueryOptions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), \"TQueryFnData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TError\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TQueryKey\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"12\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" UseQueryResult\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), \"TData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TError\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"13\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" parsedOptions \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"parseQueryArgs\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"arg1\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" arg2\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" arg3\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"14\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"useBaseQuery\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"parsedOptions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" QueryObserver\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"15\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"useQuery\"\n      }), \" 코드에서 크게 중요한 내용은 없습니다. 13번 라인의 \", _jsx(_components.code, {\n        children: \"parseQueryArgs()\"\n      }), \" 함수를 이용해 { queryKey: ['repoData'], queryFn: () => ... } 형태의 \", _jsx(_components.code, {\n        children: \"parsedOptions\"\n      }), \"를 만들고, 14번 라인의 \", _jsx(_components.code, {\n        children: \"useBaseQuery()\"\n      }), \" 함수에 \", _jsx(_components.code, {\n        children: \"parsedOptions\"\n      }), \"와 \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \" 클래스를 넘겨주고 호출하며 return 해주고 있습니다. 즉, \", _jsx(_components.code, {\n        children: \"useQuery()\"\n      }), \" 함수는 인자들을 파싱해주고 중요한 동작들을 해주는 \", _jsx(_components.code, {\n        children: \"useBaseQuery()\"\n      }), \"를 호출하여 return 해주는 역할 뿐입니다.\"]\n    }), _jsx(_components.h3, {\n      id: \"usebasequery\",\n      children: \"useBaseQuery\"\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"useBaseQuery.ts\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"1\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"export\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token generic-function\",\n            children: [_jsx(_components.span, {\n              className: \"token function\",\n              children: \"useBaseQuery\"\n            }), _jsxs(_components.span, {\n              className: \"token class-name generic\",\n              children: [_jsx(_components.span, {\n                className: \"token operator\",\n                children: \"<\"\n              }), _jsx(_components.span, {\n                className: \"token operator\",\n                children: \"...\"\n              }), _jsx(_components.span, {\n                className: \"token operator\",\n                children: \">\"\n              })]\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"2\",\n          children: [\"  options\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" UseBaseQueryOptions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"3\",\n          children: [\"  Observer\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"typeof\"\n          }), \" QueryObserver\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"4\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"5\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" queryClient \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"useQueryClient\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \" context\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"context \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"6\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" defaultedOptions \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" queryClient\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"defaultQueryOptions\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"7\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"8\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"9\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"observer\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" React\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"useState\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"10\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"11\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"new\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token class-name\",\n            children: [\"Observer\", _jsx(_components.span, {\n              className: \"token operator\",\n              children: \"<\"\n            }), \"TQueryFnData\", _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \",\"\n            }), \" TError\", _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \",\"\n            }), \" TData\", _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \",\"\n            }), \" TQueryData\", _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \",\"\n            }), \" TQueryKey\", _jsx(_components.span, {\n              className: \"token operator\",\n              children: \">\"\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"12\",\n          children: [\"        queryClient\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"13\",\n          children: [\"        defaultedOptions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"14\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"15\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"16\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"17\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" result \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" observer\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getOptimisticResult\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"defaultedOptions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"18\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"19\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"useSyncExternalStore\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"20\",\n          children: [\"    React\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"useCallback\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"21\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"onStoreChange\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"22\",\n          children: \"        isRestoring\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"23\",\n          children: [\"          \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"undefined\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"24\",\n          children: [\"          \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" observer\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"subscribe\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"notifyManager\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"batchCalls\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"onStoreChange\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"25\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), \"observer\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" isRestoring\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"26\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"27\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" observer\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getCurrentResult\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"28\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" observer\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getCurrentResult\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"29\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"30\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"31\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"32\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"33\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!\"\n          }), \"defaultedOptions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"notifyOnChangeProps\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"34\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), \" observer\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"trackResult\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"result\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"35\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" result\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"36\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [\"정말 중요한 부분이 많은 \", _jsx(_components.code, {\n        children: \"useBaseQuery\"\n      }), \"입니다. 먼저 5번 라인에서 Provider를 통해 전달받은 \", _jsx(_components.code, {\n        children: \"queryClient\"\n      }), \"를 가져옵니다. 그리고 11~14번 라인에서 새로운 \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"를 \", _jsx(_components.code, {\n        children: \"useState\"\n      }), \"를 통해 생성해줍니다. 아마 이렇게 생각하시는 분이 계실겁니다. \", _jsx(_components.em, {\n        children: \"왜 setState는 없지? 그러면 리렌더링을 어떻게 시키는거야?\"\n      }), \" 이 질문에 대한 해답은 24번 라인에 있습니다. 하지만 일단 \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"가 생성될 때 어떤 일들이 벌어지는지부터 보도록 하겠습니다.\"]\n    }), _jsx(_components.h2, {\n      id: \"queryobserver-생성\",\n      children: \"QueryObserver 생성\"\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"QueryObserver.ts\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"1\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"export\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"class\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token class-name\",\n            children: [\"QueryObserver\", _jsx(_components.span, {\n              className: \"token operator\",\n              children: \"<\"\n            }), _jsx(_components.span, {\n              className: \"token operator\",\n              children: \"...\"\n            }), _jsx(_components.span, {\n              className: \"token operator\",\n              children: \">\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"extends\"\n          }), \" \", _jsxs(_components.span, {\n            className: \"token class-name\",\n            children: [\"Subscribable\", _jsx(_components.span, {\n              className: \"token operator\",\n              children: \"<\"\n            }), \"QueryObserverListener\", _jsx(_components.span, {\n              className: \"token operator\",\n              children: \"<\"\n            }), \"TData\", _jsx(_components.span, {\n              className: \"token punctuation\",\n              children: \",\"\n            }), \" TError\", _jsx(_components.span, {\n              className: \"token operator\",\n              children: \">>\"\n            })]\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"2\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"3\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"constructor\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"4\",\n          children: [\"    client\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryClient\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"5\",\n          children: [\"    options\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryObserverOptions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"6\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"7\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"super\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"8\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"9\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"client \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" client\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"10\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"options \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" options\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"11\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"trackedProps \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"new\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"Set\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"12\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"13\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"setOptions\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"14\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"15\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"16\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [\"위에서 \", _jsx(_components.code, {\n        children: \"client\"\n      }), \"와 \", _jsx(_components.code, {\n        children: \"trackedProps\"\n      }), \" 이야기는 했으니 이번에는 13번 라인의 \", _jsx(_components.code, {\n        children: \"setOptions()\"\n      }), \" 함수를 보겠습니다.\"]\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"QueryObserver.setOptions()\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"1\",\n          children: [_jsx(_components.span, {\n            className: \"token function\",\n            children: \"setOptions\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"2\",\n          children: [\"  options\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryObserverOptions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"3\",\n          children: [\"  notifyOptions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" NotifyOptions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"4\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"5\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"6\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"updateQuery\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"7\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"8\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"updateResult\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"notifyOptions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"9\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"10\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [\"이 함수에서 여러 동작을 하지만 가장 중요한 동작은 6번 라인의 \", _jsx(_components.code, {\n        children: \"updateQuery()\"\n      }), \" 함수와 8번 라인의 \", _jsx(_components.code, {\n        children: \"updateResult()\"\n      }), \" 함수입니다. 지금 상태를 잠시 생각해보겠습니다. \", _jsx(_components.code, {\n        children: \"QueryClient\"\n      }), \"가 context api를 위한 Provider에 넣어주기 위해 생성되었고 이와 함께 \", _jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \"도 생성된 상태입니다. \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"는 지금 막 생성되었지만 아직 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \"는 생성되지 않은 상태죠. 그렇기 때문에 \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"도 아직 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \"를 가지지 못한 상태입니다. \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \"가 아직 만들어지지 않았으니까요.\"]\n    }), _jsx(_components.div, {\n      children: _jsx(_components.img, {\n        alt: \"현재 상태\",\n        src: \"https://i.imgur.com/eDiJzOl.png,https://i.imgur.com/xxPAlHi.png\"\n      })\n    }), _jsxs(_components.p, {\n      children: [\"6번 라인의 \", _jsx(_components.code, {\n        children: \"updateQuery()\"\n      }), \" 함수를 호출함으로써 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \"도 생성하고, \", _jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \"도 해당 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \"를 저장하며, 지금 생성 중인 \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"도 해당 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \" 객체를 가지게 해줍니다.\"]\n    }), _jsx(_components.h3, {\n      id: \"updatequery\",\n      children: \"updateQuery()\"\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"QueryObserver.updateQuery()\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"1\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"private\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"updateQuery\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"2\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" query \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"client\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getQueryCache\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"build\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"client\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"3\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"4\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"query \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"===\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentQuery\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"5\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"6\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"7\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"8\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" prevQuery \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentQuery \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"as\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"9\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"|\"\n          }), \" Query\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), \"TQueryFnData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TError\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TQueryData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TQueryKey\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"10\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"|\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"undefined\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"11\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentQuery \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" query\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"12\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentQueryInitialState \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" query\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"state\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"13\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"previousQueryResult \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentResult\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"14\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"15\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [\"현재 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \" 객체가 없는 상태니까 우선 만들어야겠죠? 그 동작을 2번 라인에서 수행합니다. \", _jsx(_components.code, {\n        children: \"this.client.getQueryCache()\"\n      }), \"를 통해 \", _jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \" 객체를 가지고와서 \", _jsx(_components.code, {\n        children: \"build()\"\n      }), \" 함수를 호출해줍니다.\"]\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"QueryCache.build()\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"1\",\n          children: [_jsxs(_components.span, {\n            className: \"token generic-function\",\n            children: [_jsx(_components.span, {\n              className: \"token function\",\n              children: \"build\"\n            }), _jsxs(_components.span, {\n              className: \"token class-name generic\",\n              children: [_jsx(_components.span, {\n                className: \"token operator\",\n                children: \"<\"\n              }), \"TQueryFnData\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" TError\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" TData\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" TQueryKey \", _jsx(_components.span, {\n                className: \"token keyword\",\n                children: \"extends\"\n              }), \" QueryKey\", _jsx(_components.span, {\n                className: \"token operator\",\n                children: \">\"\n              })]\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"2\",\n          children: [\"  client\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryClient\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"3\",\n          children: [\"  options\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryOptions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), \"TQueryFnData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TError\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TQueryKey\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"4\",\n          children: [\"  state\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryState\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), \"TData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TError\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"5\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" Query\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), \"TQueryFnData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TError\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TQueryKey\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"6\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" queryKey \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"queryKey\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"7\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" queryHash \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"8\",\n          children: [\"    options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"queryHash \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"??\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"hashQueryKeyByOptions\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"queryKey\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"9\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"let\"\n          }), \" query \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsxs(_components.span, {\n            className: \"token generic-function\",\n            children: [_jsx(_components.span, {\n              className: \"token function\",\n              children: \"get\"\n            }), _jsxs(_components.span, {\n              className: \"token class-name generic\",\n              children: [_jsx(_components.span, {\n                className: \"token operator\",\n                children: \"<\"\n              }), \"TQueryFnData\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" TError\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" TData\", _jsx(_components.span, {\n                className: \"token punctuation\",\n                children: \",\"\n              }), \" TQueryKey\", _jsx(_components.span, {\n                className: \"token operator\",\n                children: \">\"\n              })]\n            })]\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"queryHash\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"10\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"11\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!\"\n          }), \"query\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"12\",\n          children: [\"    query \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"new\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"Query\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"13\",\n          children: [\"      cache\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"14\",\n          children: [\"      logger\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" client\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getLogger\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"15\",\n          children: [\"      queryKey\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"16\",\n          children: [\"      queryHash\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"17\",\n          children: [\"      options\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" client\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"defaultQueryOptions\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"18\",\n          children: [\"      state\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"19\",\n          children: [\"      defaultOptions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" client\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getQueryDefaults\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"queryKey\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"20\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"21\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"add\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"query\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"22\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"23\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"24\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" query\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"25\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"useQuery()\"\n      }), \"에 넘겨준 queryKey 값을 이용해 7 ~ 8번 라인에서 \", _jsx(_components.code, {\n        children: \"queryHash\"\n      }), \"로 만들어줍니다. 9번 라인에서 \", _jsx(_components.code, {\n        children: \"get()\"\n      }), \" 함수를 통해 \", _jsx(_components.code, {\n        children: \"queriesMap\"\n      }), \" 객체에 \", _jsx(_components.code, {\n        children: \"queryHash\"\n      }), \"를 key로 하는 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \" 객체가 존재하는지 확인하고 존재한다면 가져옵니다. 하지만 현재는 없는 상태므로 12 ~ 20번 라인에서 새로운 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \"가 생성됩니다. 그리고 \", _jsx(_components.a, {\n        href: \"#query\",\n        children: \"위에서\"\n      }), \" 설명한대로 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \" 객체가 생성됩니다. 그리고 21번 라인의 \", _jsx(_components.code, {\n        children: \"add()\"\n      }), \" 함수를 통해 \", _jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \"의 \", _jsx(_components.code, {\n        children: \"queriesMap\"\n      }), \" 객체와 \", _jsx(_components.code, {\n        children: \"queries\"\n      }), \" 배열에 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \" 객체를 추가해줍니다.\"]\n    }), _jsxs(_components.p, {\n      children: [\"이렇게 생성된 \", _jsx(_components.code, {\n        children: \"Query\"\n      }), \" 객체를 받아와 \", _jsx(_components.code, {\n        children: \"QueryObserver.updateQuery()\"\n      }), \" 함수의 11번 라인에서 \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"에도 저장해줍니다.\"]\n    }), _jsx(_components.div, {\n      children: _jsx(_components.img, {\n        alt: \"QueryObserver.updateQuery( ) 이후 상태\",\n        src: \"https://i.imgur.com/Ema2Q2p.png,https://i.imgur.com/g9rYuvm.png\"\n      })\n    }), _jsxs(_components.p, {\n      children: [\"그리고 \", _jsx(_components.code, {\n        children: \"updateQuery()\"\n      }), \"를 마친 후 \", _jsx(_components.code, {\n        children: \"setOptions()\"\n      }), \"로 돌아와 \", _jsx(_components.code, {\n        children: \"updateResult()\"\n      }), \"를 수행합니다.\"]\n    }), _jsx(_components.h3, {\n      id: \"updateresult\",\n      children: \"updateResult()\"\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"QueryObserver.updateResult()\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"1\",\n          children: [_jsx(_components.span, {\n            className: \"token function\",\n            children: \"updateResult\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"notifyOptions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"?\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" NotifyOptions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"2\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" prevResult \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentResult \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"as\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"3\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"|\"\n          }), \" QueryObserverResult\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), \"TData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" TError\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"4\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"|\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"undefined\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"5\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"6\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" nextResult \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"createResult\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentQuery\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"7\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentResultState \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentQuery\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"state\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"8\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentResultOptions \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"9\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"10\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// nextResult와 prevResult가 다를 때에만 update와 notify를 실행\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"11\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"shallowEqualObjects\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"nextResult\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" prevResult\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"12\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"13\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"14\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"15\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentResult \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" nextResult\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"16\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"17\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"notify\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"defaultNotifyOptions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"notifyOptions \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"18\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [\"6번 라인의 \", _jsx(_components.code, {\n        children: \"createResult()\"\n      }), \" 함수에서 현재의 상태와 옵션을 이용해 \", _jsx(_components.code, {\n        children: \"useQuery()\"\n      }), \"를 사용한 곳에 return해줄 값을 만들어줍니다. 이렇게 만들어진 result를 \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"에 저장하고 notify해줄지 여부는 11번 라인에서 얕은 비교를 통해 결정합니다. 지금은 \", _jsx(_components.code, {\n        children: \"prevResult\"\n      }), \"가 undefined이므로 15번, 17번 라인을 수행하게 됩니다.\"]\n    }), _jsxs(_components.p, {\n      children: [\"15번 라인에서 \", _jsx(_components.code, {\n        children: \"useQuery()\"\n      }), \"의 return을 위해 \", _jsx(_components.code, {\n        children: \"this.currentResult\"\n      }), \"에 저장하며, 17번 라인에서 notify 해줍니다.\"]\n    }), _jsx(_components.h3, {\n      id: \"notify\",\n      children: \"notify()\"\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"QueryObserver.notify()\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"1\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"private\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"notify\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"notifyOptions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" NotifyOptions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"2\",\n          children: [\"  notifyManager\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"batch\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"3\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"4\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"notifyOptions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"listeners\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"5\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"listeners\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"forEach\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"listener\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"6\",\n          children: [\"        \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"listener\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentResult\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"7\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"8\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line line-number\",\n          line: \"9\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"10\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"notifyOptions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"cache\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"11\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"client\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"getQueryCache\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"notify\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"12\",\n          children: [\"        query\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"currentQuery\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"13\",\n          children: [\"        type\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"'observerResultsUpdated'\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"14\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"15\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"16\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"17\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [\"2번 라인에서 \", _jsx(_components.code, {\n        children: \"notifyManager.batch()\"\n      }), \"를 해주고 있습니다. 이 함수는 인자로 받은 callback 함수를 수행해줍니다. \", _jsx(_components.code, {\n        children: \"batch()\"\n      }), \" 함수를 자세히 보기 전에 넘겨주는 callback 함수부터 보겠습니다. 5 ~ 7번 라인의 코드는 현재로써는 아무것도 해주지 않습니다. 왜냐하면 \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"에 등록된 \", _jsx(_components.code, {\n        children: \"listeners\"\n      }), \"가 없기 때문이죠. 하지만 나중에 \", _jsx(_components.code, {\n        children: \"useQuery()\"\n      }), \"의 \", _jsx(_components.code, {\n        children: \"queryFn\"\n      }), \"이 완료는 시점에 큰 의미가 있습니다. 지금은 그냥 넘어가고 그 때 다시 설명하겠습니다.\"]\n    }), _jsxs(_components.p, {\n      children: [\"11 ~ 14번 라인에서 \", _jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \"를 가져와 다시 \", _jsx(_components.code, {\n        children: \"QueryCache.notify()\"\n      }), \"를 해줍니다. \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"에도 notify가 있고 \", _jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \"에도 notify가 있고, notify가 많아서 헷갈리죠? 각 객체가 갖고 있는 \", _jsx(_components.code, {\n        children: \"notify()\"\n      }), \" 함수의 주된 역할은 객체에 등록된 listener, observer 들을 호출하는 것입니다. \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"는 그 외에 추가적으로 \", _jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \"에 result가 변경되었다고 알려주는 역할까지 합니다. 그러면 \", _jsx(_components.code, {\n        children: \"QueryCache\"\n      }), \"의 notify 함수도 보겠습니다.\"]\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"QueryCache.notify()\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token function\",\n            children: \"notify\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"event\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" QueryCacheNotifyEvent\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line highlight-line\",\n          children: [\"  notifyManager\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"batch\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"this\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), \"listeners\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"forEach\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"listener\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"listener\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"event\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [\"별거 없죠? 위에서 얘기한대로 listener들을 호출하는 것 말고는 딱히 없습니다. 그런데 여기에서도 \", _jsx(_components.code, {\n        children: \"notifyManager.batch()\"\n      }), \" 함수가 보이네요. \", _jsx(_components.code, {\n        children: \"batch()\"\n      }), \" 함수를 자세히 볼까요?\"]\n    }), _jsx(_components.h2, {\n      id: \"batch\",\n      children: \"batch()\"\n    }), _jsx(_components.div, {\n      className: \"remark-code-title\",\n      children: \"notifyManager.batch()\"\n    }), _jsx(_components.pre, {\n      className: \"language-ts\",\n      children: _jsxs(_components.code, {\n        className: \"language-ts code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"1\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"export\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"createNotifyManager\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"2\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"let\"\n          }), \" queue\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" NotifyCallback\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"3\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"let\"\n          }), \" transactions \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"0\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"4\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"5\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" batch \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), _jsx(_components.span, {\n            className: \"token constant\",\n            children: \"T\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token function function-variable\",\n            children: \"callback\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token constant\",\n            children: \"T\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token constant\",\n            children: \"T\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"6\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"let\"\n          }), \" result\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"7\",\n          children: [\"    transactions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"++\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"8\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"try\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"9\",\n          children: [\"      result \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"callback\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"10\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"finally\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"11\",\n          children: [\"      transactions\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"--\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"12\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"!\"\n          }), \"transactions\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number highlight-line\",\n          line: \"13\",\n          children: [\"        \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"flush\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"14\",\n          children: [\"      \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"15\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"16\",\n          children: [\"    \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"return\"\n          }), \" result\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"17\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"18\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"...\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line line-number\",\n          line: \"19\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), _jsxs(_components.p, {\n      children: [\"잠시 퀴즈입니다. 현재 \", _jsx(_components.code, {\n        children: \"batch()\"\n      }), \" 함수가 몇 번 호출 되었는지 기억하시나요? 네, 2번 호출되었습니다. QueryObserver에서 1번, QueryCache에서 1번. 총 2번 호출되었습니다. 그러면 QueryObserver에서의 \", _jsx(_components.code, {\n        children: \"batch()\"\n      }), \"가 끝나기 전에 QueryCache의 \", _jsx(_components.code, {\n        children: \"batch()\"\n      }), \"가 호출되었다는 것도 기억하시나요?\"]\n    }), _jsxs(_components.p, {\n      children: [\"9번 라인에서 callback 함수를 호출합니다. 하지만 이 함수에서 더 중요한 것은, \", _jsxs(_components.strong, {\n        children: [\"두 번째의 \", _jsx(_components.code, {\n          children: \"batch()\"\n        }), \"의 호출로 현재 7번 라인을 막 지나고 있다면 \", _jsx(_components.code, {\n          children: \"transaction\"\n        }), \"은 2라는 사실입니다\"]\n      }), \". QueryCache → QueryObserver 순으로 \", _jsx(_components.code, {\n        children: \"batch()\"\n      }), \"가 호출되었으니 QueryObserver → QueryCache 순으로 \", _jsxs(_components.strong, {\n        children: [\"11번 라인을 두 번 지나야 비로소 \", _jsx(_components.code, {\n          children: \"transaction\"\n        }), \"이 0이 됩니다\"]\n      }), \". \", _jsx(_components.code, {\n        children: \"transaction\"\n      }), \"이 0이 된다면 13번 라인에서 \", _jsx(_components.code, {\n        children: \"flush()\"\n      }), \" 함수를 호출하게 됩니다.\"]\n    }), _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"flush()\"\n      }), \" 함수는 2번 라인의 \", _jsx(_components.code, {\n        children: \"queue\"\n      }), \"에 쌓인 함수들을 한 번에 실행해주는 함수입니다. 나중에 보겠지만 \", _jsx(_components.code, {\n        children: \"queue\"\n      }), \"에는 Component1과 Component2의 리렌더링을 수행하는 함수가 들어가게 됩니다. 이런 설계로 React Query는 batch\", _jsx(_components.sup, {\n        children: _jsx(_components.a, {\n          href: \"#user-content-fn-3\",\n          \"aria-describedby\": \"footnote-label\",\n          \"data-footnote-ref\": true,\n          id: \"user-content-fnref-3\",\n          children: \"3\"\n        })\n      }), \"를 구현하였습니다. \", _jsxs(_components.strong, {\n        children: [\"만약 \", _jsx(_components.code, {\n          children: \"queue\"\n        }), \"에 리렌더링을 모아 \", _jsx(_components.code, {\n          children: \"flush()\"\n        }), \"를 통해 한 번에 수행하는 구조가 아니었다면, Component1의 리렌더링과 Component2의 리렌더링 사이에 다른 코드들을 수행하느라 시간이 길어졌을 때, Component1과 Component2가 동시에 바뀌지 않고 2번에 걸쳐 바뀌는 것처럼 보일 것입니다\"]\n      }), \". 이런 문제점을 클로저로 \", _jsx(_components.code, {\n        children: \"transaction\"\n      }), \", \", _jsx(_components.code, {\n        children: \"queue\"\n      }), \"를 관리하며 해결한 것입니다.\"]\n    }), _jsxs(_components.p, {\n      children: [\"QueryObserver와 QueryCache의 \", _jsx(_components.code, {\n        children: \"batch()\"\n      }), \" 함수가 종료되면 \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \" 의 \", _jsx(_components.code, {\n        children: \"updateResult()\"\n      }), \", \", _jsx(_components.code, {\n        children: \"setOptions()\"\n      }), \"가 종료되고, \", _jsx(_components.code, {\n        children: \"QueryObserver\"\n      }), \"의 생성자 함수도 종료되어 드디어 \", _jsx(_components.code, {\n        children: \"useBaseQuery()\"\n      }), \"로 돌아갑니다.\"]\n    }), _jsx(_components.h2, {\n      id: \"마치며\",\n      children: \"마치며\"\n    }), _jsxs(_components.p, {\n      children: [\"역시 한 편 안에 안끝나네요. 길어질 줄은 알고 있었지만 이 정도일 줄이야... 아직 이야기할 내용이 많습니다. \", _jsx(_components.code, {\n        children: \"useSyncExternalStore\"\n      }), \", 리액트 내부 코드인 \", _jsx(_components.code, {\n        children: \"subscribeToStore\"\n      }), \", 언제, 어디서, 어떻게 비동기 함수가 호출되는지, Component2는 Component1이 이미 비동기 요청을 했는지 어떻게 알고 요청을 보내지 않는지 등 말 할 내용이 수두룩합니다. 최대한 빠르게 작성하도록 하겠습니다. 🙃\"]\n    }), _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"오타 및 오류 지적은 언제나 환영입니다!\"\n      })\n    }), _jsxs(_components.section, {\n      className: \"footnotes\",\n      \"data-footnotes\": true,\n      children: [_jsx(_components.h2, {\n        id: \"footnote-label\",\n        className: \"sr-only\",\n        children: \"Footnotes\"\n      }), _jsxs(_components.ol, {\n        children: [_jsx(_components.li, {\n          id: \"user-content-fn-1\",\n          children: _jsxs(_components.p, {\n            children: [\"추가적으로 생성해서 사용하면 프로젝트에 여러개가 존재할 수 있습니다만, 여기에서는 최상위에 하나만 생성하였다고 가정합니다. \", _jsx(_components.a, {\n              href: \"#user-content-fnref-1\",\n              \"aria-label\": \"Back to content\",\n              className: \"data-footnote-backref\",\n              \"data-footnote-backref\": true,\n              children: \"↩\"\n            })]\n          })\n        }), _jsx(_components.li, {\n          id: \"user-content-fn-2\",\n          children: _jsxs(_components.p, {\n            children: [_jsx(_components.strong, {\n              children: \"클로저\"\n            }), \"는 자바스크립트에서 매우 중요한 개념입니다. 혹시 뭔지 모르신다면 지금은 아니더라도 \", _jsx(_components.a, {\n              href: \"https://developer.mozilla.org/ko/docs/Web/JavaScript/Closures\",\n              children: \"꼭 공부하시기 바랍니다!\"\n            }), \" \", _jsx(_components.a, {\n              href: \"#user-content-fnref-2\",\n              \"aria-label\": \"Back to content\",\n              className: \"data-footnote-backref\",\n              \"data-footnote-backref\": true,\n              children: \"↩\"\n            })]\n          })\n        }), _jsx(_components.li, {\n          id: \"user-content-fn-3\",\n          children: _jsxs(_components.p, {\n            children: [\"여기서의 batch는 \", _jsx(_components.code, {\n              children: \"notifyManager.batch()\"\n            }), \"가 아닌 더 나은 성능을 위해 여러 개의 state 업데이트를 하나의 리렌더링으로 묶는 batch를 의미합니다. \", _jsx(_components.a, {\n              href: \"#user-content-fnref-3\",\n              \"aria-label\": \"Back to content\",\n              className: \"data-footnote-backref\",\n              \"data-footnote-backref\": true,\n              children: \"↩\"\n            })]\n          })\n        })]\n      })]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n"}